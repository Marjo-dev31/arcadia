<h3>Animaux</h3>
        <section>
            @if(datasource){
            <table mat-table [dataSource]="datasource">
                @if(datasource.length === 0){
                <p>Il n'y a pas d'animal</p>
                }
                <ng-container matColumnDef="firstname">
                    <th mat-header-cell *matHeaderCellDef>Prénom</th>
                    <td mat-cell *matCellDef="let animal">
                        {{ animal.firstname | titlecase }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="race">
                    <th mat-header-cell *matHeaderCellDef>Race</th>
                    <td mat-cell *matCellDef="let animal">
                        {{ animal.breed | lowercase }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="habitat">
                    <th mat-header-cell *matHeaderCellDef>Habitat</th>
                    <td mat-cell *matCellDef="let animal">
                        {{ animal.habitat }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="condition">
                    <th mat-header-cell *matHeaderCellDef>
                        Détails état de santé
                    </th>
                    <td mat-cell *matCellDef="let animal">
                        {{ animal.details_condition }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="image">
                    <th mat-header-cell *matHeaderCellDef>Photo</th>
                    <td mat-cell *matCellDef="let animal">
                        @if(animal.image_url) {
                        <div class="delete-img">
                            <div>{{ animal.image_url }}</div>
                            <mat-icon
                                class="mat-icon-clear"
                                (click)="deleteImage(animal.image_id)"
                                >clear</mat-icon
                            >
                        </div>
                        } @else {
                        <p>Il n'y a pas encore de photo associé à cet animal</p>
                        }
                        <div class="add-img">
                            <p>Ajouter une photo :</p>
                            <input
                                type="file"
                                class="file-input"
                                (change)="onFileChange($event, animal.id)"
                            />
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef>Action</th>
                    <td mat-cell *matCellDef="let animal">
                        <mat-icon (click)="editAnimal(animal.id)"
                            >create</mat-icon
                        >
                        <mat-icon (click)="deleteAnimal(animal.id)"
                            >delete</mat-icon
                        >
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayColums"></tr>
                <tr mat-row *matRowDef="let row; columns: displayColums"></tr>
            </table>
            } @if(!addFormIsDisplay()){
            <mat-icon class="add-icon" (click)="toggleAddForm()"
                >add_circle_outline</mat-icon
            >
            } @if(addFormIsDisplay()){
            <mat-icon class="add-icon" (click)="toggleAddForm()"
                >remove_circle_outline</mat-icon
            >
            }
        </section>
        <section [ngStyle]="{ display: addFormIsDisplay() ? 'block' : 'none' }">
            <form
                class="add-form"
                #form="ngForm"
                name="addform"
                (ngSubmit)="onSubmit(form)"
            >
                <input
                    type="text"
                    placeholder="Prénom"
                    name="firstname"
                    [(ngModel)]="newAnimal.firstname"
                    #firstname="ngModel"
                    required
                />
                @if(firstname.invalid && firstname.touched){
                <p class="alert">Un prénom est requis</p>
                }
                <select
                    name="selected-breed"
                    [(ngModel)]="newAnimal.breed"
                    #breed="ngModel"
                    required
                >
                    <option>--Choissisez une race--</option>
                    @for(breed of breeds; track breed) {
                    <option [value]="breed.id">
                        {{ breed.name | lowercase }}
                    </option>
                    }
                </select>
                @if(breed.invalid && breed.touched){
                <p class="alert">Une race est requise</p>
                }
                <select
                    name="selected-habitat"
                    [(ngModel)]="newAnimal.habitat"
                    #habitat="ngModel"
                    required
                >
                    <option>--Choissisez un habitat--</option>
                    @for(habitat of habitats; track habitat.id) {
                    <option [value]="habitat.id">{{ habitat.title }}</option>
                    }
                </select>
                @if(habitat.invalid && habitat.touched){
                <p class="alert">Un habitat est requis</p>
                }
                <button class="add-btn" [disabled]="form.invalid">
                    Enregistrer nouvel animal
                </button>
                <p>
                    Pensez à ajouter ce nouvel animal également dans la section
                    popularité des animaux
                </p>
            </form>
        </section>
        <section
            [ngStyle]="{ display: updateFormIsDisplay() ? 'block' : 'none' }"
        >
            <form
                class="update-form"
                [formGroup]="updateForm"
                (ngSubmit)="updateAnimal()"
            >
                <input type="text" formControlName="firstname" />
                @if(updateForm.controls['firstname'].invalid &&
                updateForm.controls['firstname'].touched){
                <div class="alert">Un prénom est requis</div>
                }
                <select
                    name="selected-breed"
                    #selectedBreed
                    formControlName="breed"
                >
                    @for(breed of breeds; track breed.id) {
                    <option [value]="breed.id">
                        {{ breed.name | lowercase }}
                    </option>
                    }
                </select>
                @if(updateForm.controls['breed'].invalid &&
                updateForm.controls['breed'].touched){
                <div class="alert">Une race est requise</div>
                }
                <select
                    name="selected-habitat"
                    #selectedHabitat
                    formControlName="habitat"
                >
                    @for(habitat of habitats; track habitat.id) {
                    <option [value]="habitat.id">{{ habitat.title }}</option>
                    }
                </select>
                @if(updateForm.controls['habitat'].invalid &&
                updateForm.controls['habitat'].touched){
                <div class="alert">Un habitat est requis</div>
                }
                <button class="add-btn" type="submit" [disabled]="updateForm.invalid">
                    Modifier animal
                </button>
            </form>
            <mat-icon class="add-icon" (click)="closeUpdateForm()"
                >remove_circle_outline</mat-icon
            >
        </section>
        <section>
            <h3>Ajouter une nouvelle race :</h3>
            <form [formGroup]="breedForm" (ngSubmit)="addBreed()">
                <input type="text" formControlName="name" />
                @if(breedForm.controls['name'].invalid &&
                breedForm.controls['name'].touched){
                <p class="alert">Une race est requise</p>
                }
                <button  [disabled]="breedForm.invalid">Ajouter la race</button>
            </form>
            @if(submitted()){
            <p>Nouvelle race créée !</p>
            }
        </section>